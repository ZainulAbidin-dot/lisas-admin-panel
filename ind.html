<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
</body>
<script>
    const canvas = document.createElement("canvas");
const ctx = canvas.getContext("2d");
document.body.appendChild(canvas);
canvas.width = 600;
canvas.height = 400;

// Set background color
canvas.style.backgroundColor = "grey";
canvas.zIndex = -1;

// Load player sprite
const playerImg = new Image();
playerImg.src = "player.png"; // Replace with actual path to 2D pixel art

// Player (Girl S)
const player = { x: canvas.width / 2, y: canvas.height / 2, size: 20, dx: 0, dy: 0, speed: 3, lastDirection: { dx: 0, dy: -1 } };
const bullets = [];
const enemies = [];
const speed = 2;

document.addEventListener("keydown", (e) => {
    if (e.key === " ") { // Spacebar to shoot
        bullets.push({ x: player.x, y: player.y, dx: player.lastDirection.dx * 4, dy: player.lastDirection.dy * 4 });
    } else if (e.key === "ArrowUp") {
        player.dy = -player.speed;
        player.lastDirection = { dx: 0, dy: -1 };
    } else if (e.key === "ArrowDown") {
        player.dy = player.speed;
        player.lastDirection = { dx: 0, dy: 1 };
    } else if (e.key === "ArrowLeft") {
        player.dx = -player.speed;
        player.lastDirection = { dx: -1, dy: 0 };
    } else if (e.key === "ArrowRight") {
        player.dx = player.speed;
        player.lastDirection = { dx: 1, dy: 0 };
    }
});

document.addEventListener("keyup", (e) => {
    if (["ArrowUp", "ArrowDown"].includes(e.key)) {
        player.dy = 0;
    } else if (["ArrowLeft", "ArrowRight"].includes(e.key)) {
        player.dx = 0;
    }
});

function spawnEnemy() {
    const side = Math.floor(Math.random() * 4);
    let x, y, dx, dy;
    if (side === 0) { x = Math.random() * canvas.width; y = 0; dx = 0; dy = speed; } // Top
    else if (side === 1) { x = canvas.width; y = Math.random() * canvas.height; dx = -speed; dy = 0; } // Right
    else if (side === 2) { x = Math.random() * canvas.width; y = canvas.height; dx = 0; dy = -speed; } // Bottom
    else { x = 0; y = Math.random() * canvas.height; dx = speed; dy = 0; } // Left
    enemies.push({ x, y, dx, dy });
}

function update() {
    player.x += player.dx;
    player.y += player.dy;
    
    bullets.forEach((bullet, i) => {
        bullet.x += bullet.dx;
        bullet.y += bullet.dy;
        if (bullet.y < 0 || bullet.x < 0 || bullet.x > canvas.width || bullet.y > canvas.height) bullets.splice(i, 1);
    });
    
    enemies.forEach((enemy, i) => {
        enemy.x += enemy.dx;
        enemy.y += enemy.dy;
        if (Math.hypot(enemy.x - player.x, enemy.y - player.y) < player.size) {
            alert("Game Over!");
            document.location.reload();
        }
        bullets.forEach((bullet, j) => {
            if (Math.hypot(bullet.x - enemy.x, bullet.y - enemy.y) < player.size) {
                enemies.splice(i, 1);
                bullets.splice(j, 1);
            }
        });
    });
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(playerImg, player.x - player.size / 2, player.y - player.size / 2, player.size, player.size);
    
    bullets.forEach((bullet) => {
        ctx.fillStyle = "red";
        ctx.fillRect(bullet.x, bullet.y, 5, 5);
    });
    
    enemies.forEach((enemy) => {
        ctx.fillStyle = "green";
        ctx.fillRect(enemy.x - 10, enemy.y - 10, 20, 20);
        ctx.fillStyle = "white";
        ctx.fillText("Z", enemy.x - 5, enemy.y - 15);
    });
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

setInterval(spawnEnemy, 1000);
gameLoop();

</script>
</html>